# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
#
# HISTORY
# $Log: Makefile,v $
# Revision 1.1.26.3  1996/10/15  20:54:25  arvind
# 	Add acf for krb5rpc.idl
# 	[1996/10/11  00:03 UTC  sommerfeld  /main/DCE_1.2.2/sommerfeld_pk_kdc_2/1]
#
# 	Merge Registry support for KDC private key storage
# 	[1996/07/13  20:49 UTC  aha  /main/aha_pk6/1]
#
# 	Merge-out and bugfixes and Registry work
# 	[1996/03/09  23:30:16  marty  1.1.23.3]
#
# Revision 1.1.26.2  1996/10/03  15:08:09  arvind
# 	Change INCFLAGS for krb5rpc.o to point it at "real" kdc_util.h
# 	[1996/09/17  00:26 UTC  sommerfeld  /main/DCE_1.2.2/sommerfeld_pk_kdc_1/1]
# 
# 	Merge Registry support for KDC private key storage
# 	[1996/07/13  20:49 UTC  aha  /main/aha_pk6/1]
# 
# 	Merge-out and bugfixes and Registry work
# 	[1996/03/09  23:30:16  marty  1.1.23.3]
# 
# Revision 1.1.26.1  1996/08/09  12:08:36  arvind
# 	Merge Registry support for KDC private key storage
# 	[1996/07/13  20:49 UTC  aha  /main/aha_pk6/1]
# 
# 	Merge-out and bugfixes and Registry work
# 	[1996/03/09  23:30:16  marty  1.1.23.3]
# 
# Revision 1.1.23.3  1996/03/09  23:30:16  marty
# 	Update OSF copyright year
# 	[1996/03/09  22:45:35  marty]
# 
# Revision 1.1.23.2  1995/12/08  17:49:54  root
# 	Submit OSF/DCE 1.2.1
# 
# 	HP revision /main/HPDCE02/2  1995/06/29  22:51 UTC  rps
# 	machdep.mk
# 
# 	HP revision /main/HPDCE02/rps_moop/2  1995/06/29  03:49 UTC  rps
# 	include machdep
# 
# 	HP revision /main/HPDCE02/rps_moop/1  1995/06/16  00:01 UTC  rps
# 	PIC code not needed
# 
# 	HP revision /main/HPDCE02/1  1995/05/15  21:04 UTC  greg
# 	Create SEC_migrate_merge mainline from SEC_migrate and HPDCE02.
# 	[1995/04/21  18:57 UTC  greg  /main/SEC_migrate_merge/1]
# 
# 	add log_journal  module
# 	[1995/04/03  22:14 UTC  hondo  /main/SEC_migrate/5]
# 
# 	add rs_log_journal_activity.c
# 	[1995/03/28  19:30 UTC  hondo  /main/SEC_migrate/hondo_mig1/1]
# 
# 	Build rs_log_sw_version.o
# 	[1995/04/03  18:40 UTC  greg  /main/SEC_migrate/4]
# 
# 	Merge .../greg_sec_migrate/LATEST --> .../SEC_migrate/LATEST.
# 	[1995/02/11  22:14 UTC  greg  /main/SEC_migrate/3]
# 
# 	Build  new rs_ver.o.
# 	[1995/02/06  07:14 UTC  greg  /main/SEC_migrate/greg_sec_migrate/1]
# 
# 	build rs_replist_1_0.idl for compatibility
# 	with pre-1.1 clients.
# 
# 	[1995/01/30  01:22 UTC  greg  /main/SEC_migrate/2]
# 
# 	Create initial SEC_migrate mainline.
# 	Compiled but not tested.
# 	[1995/01/27  21:49 UTC  greg  /main/SEC_migrate/1]
# 
# 	build rpriv_1_0.{h, sstub.c}
# 	[1995/01/27  20:13 UTC  greg  /main/greg_migration2/1]
# 
# Revision 1.1.19.1  1994/10/26  20:00:51  hondo
# 	changes to support propagation of login activity.
# 	[1994/10/25  14:57:11  hondo]
# 
# 	changes for replication of login activity.
# 
# Revision 1.1.16.8  1994/08/25  21:42:29  sekhar
# 	[OT 11751 ] - Sec ACL Manager for SVCIF (add rs_svc_acl.o ).
# 	[1994/08/24  19:38:03  sekhar]
# 
# Revision 1.1.16.7  1994/07/15  15:01:03  mdf
# 	Hewlett Packard Security Code Drop
# 	[1994/07/14  17:18:42  mdf]
# 
# Revision 1.1.16.5  1994/06/03  13:39:22  mdf
# 	removed DCE_AUD_POINTS from CFLAGS.
# 
# 	  NOTE:  THIS IS ONLY A QUICK FIX, THERE'S A MEMORY LEAK IN THE
# 	         AUDIT CODE, THIS FIX DISABLES THE CODE!
# 	[1994/06/03  13:34:59  mdf]
# 
# Revision 1.1.16.4  1994/06/02  21:27:08  mdf
# 	hp_sec_to_osf_3 drop, merge up with latest.
# 	[1994/05/24  15:17:34  mdf]
# 
# 	hp_sec_to_osf_3 drop
# 
# Revision 1.1.14.2  1993/06/10  19:27:28  sommerfeld
# 	Clean up silly hack for RSS_OBJS (left over from the bad old days when
# 	creating the archive deleted the .o files...)
# 	[1993/06/08  18:16:22  sommerfeld]
# 
# Revision 1.1.7.7  1993/01/26  23:04:05  emartin
# 	CFLAGS -DRS_REP_NAUTH
# 	[1993/01/13  16:27:44  emartin]
# 
# Revision 1.1.7.6  1992/12/29  16:34:20  zeliff
# 	Embedding copyright notice
# 	[1992/12/28  21:22:43  zeliff]
# 
# Revision 1.1.7.5  1992/11/20  15:52:24  ahop
# 	Add rs_rep_init.c
# 	[1992/11/10  23:08:37  ahop]
# 
# Revision 1.1.7.4  1992/11/04  19:34:37  ahop
# 	Third replication drop: bl6a
# 	[1992/11/03  18:28:05  ahop]
# 
# Revision 1.1.7.3  1992/10/07  20:31:55  sekhar
# 	[OT 5566]  Bl5 Replication code drop from HP.
# 	[1992/10/07  19:15:37  sekhar]
# 
# Revision 1.1.8.2  1992/10/06  16:05:45  burati
# 	Second replication drop: bl5
# 	Add rs_mkey.c and rs_prop_*
# 
# Revision 1.1.7.2  1992/08/31  18:23:21  sekhar
# 	First security replication code drop
# 	[1992/08/31  15:10:59  sekhar]
# 
# Revision 1.1.3.4  1992/06/02  21:08:55  sekhar
# 	Drop the Unix interfaces changes made by frisco.
# 	[1992/06/01  20:24:04  sekhar]
# 
# Revision 1.1.5.2  1992/05/21  21:36:42  frisco
# 	Add Unix interface support
# 
# Revision 1.1.3.3  1992/04/07  19:19:14  mckeen
# 	Reordered IDLFILES definition.
# 	[1992/04/07  16:48:08  mckeen]
# 
# 	Removed DATAFILES definition and add .ORDER directive
# 	[1992/03/13  15:46:59  mckeen]
# 
# Revision 1.1.3.2  1992/03/27  19:13:42  burati
# 	CR2016 Remove references to rdacliftmp.idl
# 	[1992/03/27  18:42:16  burati]
# 
# Revision 1.1.3.2  1992/03/27  19:13:42  burati
# 	CR2016 Remove references to rdacliftmp.idl
# 	[1992/03/27  18:42:16  burati]
# 
# Revision 1.1  1992/01/19  14:44:26  devrcs
# 	Initial revision
# 
# $EndLog$

# Copyright (c) Hewlett-Packard Company 1991, 1992
# Unpublished work. All Rights Reserved.
#
# DCE Security Services
# /server/rs Makefile
#

# Additional places to search for files
VPATH = ../../idl

# Flags for the NIDL compiler
IDLINCFLAGS = -I. -I../../idl
IDLFLAGS =  -keep c_source
IDLFILES =                  \
        krb5rpc.idl         \
        rdaclif.idl         \
        rdaclifv0.idl       \
        rpriv.idl           \
        rpriv_1_0.idl       \
        rs_acct.idl         \
        rs_attr.idl         \
        rs_attr_schema.idl  \
        rs_attr_srch.idl    \
        rs_login_activity.idl    \
        rs_prop_login_reset.idl    \
        rs_bind.idl         \
        rs_misc.idl         \
        rs_pgo.idl          \
        rs_plcy.idl         \
        rs_prop_acct.idl    \
        rs_prop_acl.idl     \
        rs_prop_attr.idl     \
        rs_prop_attr_schema.idl     \
        rs_prop_pgo.idl     \
        rs_prop_plcy.idl    \
        rs_prop_replist.idl \
        rs_repadm.idl       \
        rs_replist.idl      \
        rs_replist_1_0.idl  \
        rs_repmgr.idl       \
        rs_unix.idl         \
        rs_update.idl       \
        rsecidmap.idl       \
        rs_pwd_mgmt.idl    \
        priv_attr_trig.idl


rs_misc_ACF =
priv_attr_trig_ACF =
krb5rpc_ACF = 

IDLDATAFILES =              \
        krb5rpc.h           \
        rdaclif.h           \
        rdaclifv0.h         \
        rpriv.h             \
        rpriv_1_0.h         \
        rs_acct.h           \
        rs_attr.h           \
        rs_attr_schema.h    \
        rs_attr_srch.h      \
        rs_login_activity.h      \
        rs_prop_login_reset.h      \
        rs_bind.h           \
        rs_misc.h           \
        rs_pgo.h            \
        rs_plcy.h           \
        rs_prop_acct.h      \
        rs_prop_acl.h       \
        rs_prop_attr.h     \
        rs_prop_attr_schema.h     \
        rs_prop_pgo.h       \
        rs_prop_plcy.h      \
        rs_prop_replist.h   \
        rs_repadm.h         \
        rs_replist.h        \
        rs_replist_1_0.h    \
        rs_repmgr.h         \
        rs_unix.h           \
        rs_update.h         \
        rsecidmap.h         \
        rs_pwd_mgmt.h	\
        priv_attr_trig.h


# Compiler flags for this directory
CFLAGS  = -DOSF_DCE ${DCEPATHS} -D_BSD -DBSD -DRS_REP_NAUTH ${${TARGET_MACHINE}_CFLAGS} -DDCE_AUD_POINTS

INCFLAGS = -I../../h
rkrb5rpc.o_INCFLAGS=-I../../krb5/kdc ${INCFLAGS}


RSLIB = rkrb5rpc.o          \
        rpriv.o             \
	rpriv_v1_1_mgrs.o   \
        rpriv_util.o        \
        rpriv_attr.o        \
        rs.o                \
        rs_acct.o           \
	rs_attr.o           \
	rs_attr_schema.o    \
	rs_attr_srch.o      \
	rs_attr_util.o      \
        rs_audit_trail.o    \
        rs_auth.o           \
        rs_bind.o           \
        rs_dacl.o           \
        rs_dns.o            \
        rs_lock.o           \
        rs_log.o            \
        rs_log_acct.o       \
        rs_log_acl.o        \
        rs_log_attr.o       \
        rs_log_attr_schema.o       \
        rs_log_pgo.o        \
        rs_log_policy.o     \
        rs_log_replist.o    \
        rs_log_login_activity.o    \
        rs_log_journal_activity.o    \
        rs_log_login_reset.o    \
        rs_log_sw_version.o    \
        rs_log_util.o       \
        rs_login.o          \
        rs_login_activity.o          \
        rs_prop_login_reset.o          \
        rs_master.o         \
        rs_master_change.o  \
        rs_master_replist.o \
        rs_misc.o           \
        rs_mkey.o           \
        rs_ns.o             \
        rs_pgo.o            \
        rs_policy.o         \
        rs_proc.o           \
        rs_prop_acct.o      \
        rs_prop_acl.o       \
        rs_prop_attr.o     \
        rs_prop_attr_schema.o     \
        rs_prop_pgo.o       \
        rs_prop_plcy.o      \
        rs_prop_replist.o   \
        rs_prop_tasks.o     \
        rs_pwd.o            \
        rs_pwd_mgmt.o       \
        rs_rep_auth.o       \
        rs_rep_bind.o       \
        rs_rep_init.o       \
        rs_rep_mgmt.o       \
        rs_rep_util.o       \
        rs_rep_vmcc.o       \
        rs_repadm.o         \
        rs_replist.o        \
        rs_replist2.o       \
        rs_repmgr.o         \
        rs_reserved.o       \
        rs_rsdb.o           \
        rs_svc_acl.o        \
        rs_secidmap.o       \
        rs_state.o          \
        rs_task.o           \
        rs_unix.o           \
        rs_util.o           \
        rs_ver.o            \
        rwl.o 



STUBS =                         \
        krb5rpc_sstub.o         \
        rdaclif_sstub.o         \
        rdaclifv0_sstub.o       \
        rpriv_sstub.o           \
	rpriv_1_0_sstub.o       \
	rs_acct_sstub.o         \
        rs_attr_sstub.o         \
        rs_attr_schema_sstub.o  \
        rs_attr_srch_sstub.o    \
        rs_login_activity_sstub.o    \
        rs_prop_login_reset_sstub.o    \
        rs_bind_sstub.o         \
        rs_misc_sstub.o         \
        rs_pgo_sstub.o          \
        rs_plcy_sstub.o         \
        rs_prop_acct_sstub.o    \
        rs_prop_acl_sstub.o     \
        rs_prop_attr_sstub.o     \
        rs_prop_attr_schema_sstub.o     \
        rs_prop_pgo_sstub.o     \
        rs_prop_plcy_sstub.o    \
        rs_prop_replist_sstub.o \
        rs_repadm_sstub.o       \
        rs_replist_sstub.o      \
        rs_replist_1_0_sstub.o      \
        rs_repmgr_sstub.o       \
        rs_unix_sstub.o         \
        rs_update_sstub.o       \
        rsecidmap_sstub.o       \
        rs_pwd_mgmt_sstub.o	\
        priv_attr_trig_cstub.o

RS_OBJS = ${RSLIB} ${STUBS}

RSS_OBJS =                  \
        rs_rep_util.o   \
        rs_reserved.o   \
        rs_task.o       \
        rss_errors.o        \
        rss_util.o   

# Libraries to build
LIBRARIES = librs.a librss.a
EXPLIB_TARGETS = librs.a librss.a

librs.a_OFILES = ${RS_OBJS}

librss.a_OFILES = ${RSS_OBJS}


.if exists(${TARGET_MACHINE}/machdep.mk)
.include "${TARGET_MACHINE}/machdep.mk"
.endif

.include <${RULES_MK}>
