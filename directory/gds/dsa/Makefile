#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
# HISTORY
# $Log: Makefile,v $
# Revision 1.2.20.2  1996/03/09  23:13:34  marty
# 	Update OSF copyright year
# 	[1996/03/09  22:30:53  marty]
#
# Revision 1.2.20.1  1995/12/08  15:41:08  root
# 	Submit OSF/DCE 1.2.1
# 	[1995/12/08  15:05:41  root]
# 
# Revision 1.2.18.7  1994/07/11  21:06:07  keutel
# 	OT 10732: gdsmkiss and gdsgendb run during installation
# 	[1994/07/11  21:01:55  keutel]
# 
# Revision 1.2.18.6  1994/06/21  14:44:55  marrek
# 	June 1994 code submission.
# 	[1994/06/16  09:29:23  marrek]
# 
# Revision 1.2.18.5  1994/05/20  22:03:22  sommerfeld
# 	Don't do the gdsmkiss if ODE_UNDER_CLEARCASE set..
# 	[1994/05/17  19:30:26  sommerfeld]
# 
# Revision 1.2.18.4  1994/05/10  15:51:30  marrek
# 	Bug fixes for April 1994 submission.
# 	[1994/05/06  15:05:29  marrek]
# 
# 	Bug fixes for April 1994 submission.
# 	[1994/05/05  07:29:24  marrek]
# 
# 	Bug fixes for April 1994 submission.
# 	[1994/05/04  14:26:50  marrek]
# 
# 	Bug fixes in April 1994 submission.
# 	[1994/05/03  16:39:47  marrek]
# 
# 	April 1994 code submission.
# 	[1994/04/27  12:17:46  marrek]
# 
# Revision 1.2.18.3  1994/03/23  15:08:53  keutel
# 	March 1994 code drop
# 	[1994/03/21  16:18:30  keutel]
# 
# Revision 1.2.18.2  1994/02/22  16:04:42  marrek
# 	Use "" instead of <> for .include osdep.mk .
# 	[1994/02/09  14:26:47  marrek]
# 
# 	Code drop for dce1.1.
# 	[1994/02/08  10:05:31  marrek]
# 
# Revision 1.2.18.1  1993/12/07  17:54:32  mario
# 	Changed for ode2.3 - < and > becomes this except for RULES_MK
# 	[1993/12/07  17:25:20  mario]
# 
# Revision 1.2.15.4  1993/10/14  17:16:08  keutel
# 	October 1993 code drop
# 	[1993/10/14  17:06:26  keutel]
# 
# Revision 1.2.15.3  1993/10/13  17:30:10  keutel
# 	Merged with changes from 1.2.15.2
# 	[1993/10/13  17:26:17  keutel]
# 
# 	October 1993 code drop
# 	[1993/10/09  18:53:34  keutel]
# 
# Revision 1.2.15.2  1993/10/05  16:48:08  zeliff
# 	Defect 8955:  removed ${TARGET_MACHINE}_LIBS, added -lslog
# 	[1993/10/05  16:16:16  zeliff]
# 
# Revision 1.2.15.1  1993/10/04  17:37:43  keutel
# 	use of libdua instead of libdce for gds processes
# 	[1993/10/04  17:34:35  keutel]
# 
# Revision 1.2.11.4  1993/08/10  13:13:37  marrek
# 	July 1993 code drop.
# 	[1993/07/30  12:56:03  marrek]
# 
# Revision 1.2.11.3  1993/05/27  17:35:16  tom
# 	Use tmp directory to run gdsmkiss and gdsgendb so builds
# 	can work over NFS. Use either osdep.mk or default rule, not both.
# 	[1993/05/27  15:49:18  tom]
# 
# Revision 1.2.11.2  1993/05/24  20:45:24  cjd
# 	Submitting 102-dme port to 103i
# 	[1993/05/24  20:14:23  cjd]
# 
# Revision 1.2.9.2  1993/05/21  16:44:57  jd
# 	Fixed dependancey problem that for some reason worked on the pmax.
# 	[1993/05/21  16:44:39  jd]
# 
# Revision 1.2.5.8  1993/02/03  21:26:46  marcyw
# 	Removed references to attr22.dat & attr22.idx from Makefile.
# 	[1993/02/03  21:01:39  marcyw]
# 
# Revision 1.2.5.7  1993/02/02  14:42:05  marrek
# 	*** empty log message ***
# 
# Revision 1.2.5.6  1993/02/02  11:13:52  marrek
# 	replace d26gutil.o by d26gutilis.o in gdsgendb_OFILES
# 	add d26sutil.o in gdsmkiss_OFILES
# 	[1993/02/01  17:04:33  marrek]
# 
# Revision 1.2.5.5  1992/12/31  18:57:53  bbelch
# 	Embedding copyright notice
# 	[1992/12/31  13:17:03  bbelch]
# 
# Revision 1.2.5.4  1992/12/15  17:08:04  marrek
# 	Fix for bug 4975: add module d26common.o to gdstransfer_OFILES
# 	and remove -ld26dsa from gdstransfer_LIBS
# 	[1992/12/15  17:07:20  marrek]
# 
# Revision 1.2.5.3  1992/11/27  19:28:50  marrek
# 	November 1992 code drop
# 	[1992/11/20  10:59:43  marrek]
# 
# Revision 1.2.5.2  1992/09/29  21:10:09  devsrc
# 	[hinman@sni] - Check in merges from SNI
# 	[1992/09/14  20:23:34  treff]
# 
# Revision 1.2.2.5  1992/06/30  20:55:30  melman
# 	GDS drop of 6/16/92
# 	[1992/06/30  20:34:40  melman]
# 
# Revision 1.2.2.4  1992/06/01  23:41:32  zeliff
# 	New version of file from GDS drop
# 	[1992/05/28  20:50:08  zeliff]
# 
# Revision 1.2.2.3  1992/04/07  19:07:34  mckeen
# 	Merged with mainline
# 	[1992/03/31  16:36:07  mckeen]
# 
# 	Commented out DATAFILES
# 	[1992/03/13  15:39:47  mckeen]
# 
# Revision 1.2.2.2  1992/01/22  22:33:25  jim
# 	Changes needed to build on AIX platform.
# 	[1992/01/22  22:26:56  jim]
# 
# Revision 1.2  1992/01/19  22:13:08  devrcs
# 	Dropping DCE1.0 OSF1_misc port archive
# 
# $EndLog$
#
# $RCSfile: Makefile,v $ $Revision: 1.2.20.2 $ $Date: 1996/03/09 23:13:34 $
#

LIBRARIES	= libd26dae.a libd26dsa.a libd26isam.a
GARBAGE		= d26dnlisd.c d26loggd.c d26mkupdnlis.c \
		  d26utild.c d26common2.c d26common3.c \
		  d26sntx2.c d26util2.c
PROGRAMS        = gdsdsa gdsgendb gdstransfer gdsmkupd gdsmkiss
gdsdsa_IMODE	= 755
gdsgendb_IMODE	= 755
gdstransfer_IMODE = 755
gdsmkupd_IMODE	= 755
gdsmkiss_IMODE	= 755
gdschdb_IMODE	= 755
LOCALFILES	= schema_ib
DATAFILES	= ${LOCALFILES}
SCRIPTS		= gdschdb.sh
OBJECTS         = gdschdb
ILIST         = ${PROGRAMS} ${OBJECTS} ${LOCALFILES}
INCFLAGS      = -I../h -I../cisam/isam
EXPDIR                = /usr/lib/
EXPLIB_TARGETS        = ${LIBRARIES:S/^/export_/g}
IDIR          = /bin/

# for shared library libdsal :

.if exists(${TARGET_MACHINE}/machdep.mk)
.include "${TARGET_MACHINE}/machdep.mk"
.endif

schema_ib_IMODE		=666
schema_ib_IDIR          =/share/var/directory/gds/dsa/

d26dsa.o_CFLAGS     = -DNOT_CHECK_KEY ${CFLAGS}

d26mkupdnlis.o_CFLAGS = -DMKUPD ${CFLAGS}

d26dnlisd.o_CFLAGS = -DDAEMON ${CFLAGS}
d26loggd.o_CFLAGS = -DDAEMON ${CFLAGS}

libd26dae.a_OFILES = \
      d26dnlisd.o d262dnlis.o d26loggd.o d26util2.o \
      d26sntx2.o d26common2.o d26svcisd.o

libd26dsa.a_OFILES = \
	d26init.o d26mutil.o d26dnlis.o d26util.o d261util.o d26sntx.o \
	d26common.o d26mhs.o d26logg.o d26sali.o \
	d26bind.o d26unbind.o d26dread.o d26aban.o \
	addob.o addutil.o \
	d26read.o d26compare.o d26list.o d26search.o \
	retutil.o retreq.o retref.o d26wrut.o d26fil.o \
	d26anal.o d26copy.o \
	d26dsp.o d26cup.o d26rdec.o \
	remob.o remutil.o modrdn.o moden.o d26stmutil.o \
	secutil.o

libd26isam.a_OFILES = \
      d26mutilis.o d26rschis.o d26utilis.o d261utilis.o \
      addutilis.o \
      retutilis.o retolis.o retreqis.o d26filis.o d26refis.o d26alis.o \
      d26srk.o d26spatis.o d26mhsis.o d26secis.o \
      remutilis.o  modenfil.o \
      modrdnfil.o \
      d26svcis.o

gdsdsa_LIBS   = -ldsa_sec -ld26dsa -ld26isam -ld26dsa -ld26isam -ldirasn -ld2aasn -lDUA -lids -lisam -ldsal ${LIBS} -lm
# the repeating of ld26dsa and ld26isam is required - otherwise there are 
# unresolved symbols (solution has to be provided !)

gdsdsa_OFILES = d26dsa.o

gdsgendb_LIBS = -ld26dsa -ld26isam -lisam -ldsal ${LIBS} -lm
gdsgendb_OFILES = d26gendb.o d26gutilis.o

gdsmkiss_LIBS = -ld26dsa -ld26isam -lisam -ldsal ${LIBS} -lm
gdsmkiss_OFILES = d26mkiss.o d26sutil.o

gdstransfer_LIBS      = -ld26isam -lisam -ldsal ${LIBS} -lm
gdstransfer_OFILES    = d26trans.o d26tutil.o d26common3.o

gdsmkupd_LIBS = -ld26dsa -ld26isam -lisam -ldsal ${LIBS} -lm
gdsmkupd_OFILES       = d26mkupd.o d26mkupdnlis.o

.include <${RULES_MK}>

.ORDER: ${OBJECTS}

d26common3.c: d26common.c
	rm -f $@
	cp $> $@

d26phon3.c: d26phon.c
	rm -f $@
	cp $> $@

d26common2.c: d26common.c
	rm -f $@
	cp $> $@

d26util2.c: d26util.c
	rm -f $@
	cp $> $@

d26sntx2.c: d26sntx.c
	rm -f $@
	cp $> $@

d26mkupdnlis.c:       d26dnlis.c
	rm -f $@
	cp $> $@

d26dnlisd.c:  d26dnlis.c
	rm -f $@
	cp $> $@

d26loggd.c:   d26logg.c
	rm -f $@
	cp $> $@

d26utild.c:   d26util.c
	rm -f $@
	cp $> $@

d26svcisd.c:   d26svcis.c
	rm -f $@
	cp $> $@

