#   
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1994, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE for
# the full copyright text.
#  
# All Rights Reserved
#    
# HISTORY
# $Log: Makefile,v $
# Revision 1.1.2.2  1996/10/04  19:25:39  arvind
# 	OSF DCE 1.2.2 Drop 4
# 	[1996/10/04  19:25:10  arvind]
#
# Revision /main/DCE_1.2.2/8  1996/09/17  18:35 UTC  cuti
# 	Merge for international build.
# 
# Revision /main/DCE_1.2.2/cuti_pk_fix/1  1996/09/16  16:41 UTC  cuti
# 	Update for International build
# 
# Revision /main/DCE_1.2.2/7  1996/09/09  21:32 UTC  arvind
# 	PKSS drop from DEC (DCE1.2.2)
# 	[1996/08/30  15:33 UTC  arvind  /main/DCE_1.2.2/arvind_pkss/1]
# 
# 	OSF DCE1.2.2 Drop3
# 	Makefile,v
# 	[1996/07/08  20:20:50  arvind  1.1.2.1]
# 
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 	[1996/07/08  20:02:59  arvind]
# 	#
# 
# 	Rechecked in
# 	[1996/07/01  00:28 UTC  cuti  /main/DCE_1.2.2/5]
# 
# 	Remove libbsafe2.a from libpsm.a
# 	[1996/06/27  14:03 UTC  cuti  /main/DCE122_PK/cuti_pk_export/3]
# 
# 	Modified and comments included
# 	[1996/06/24  13:53 UTC  cuti  /main/DCE122_PK/cuti_pk_export/2]
# 
# 	Merge out from cuti_pk_new to cuti_pk_export
# 
# 	DCE12_PK -> DCE122_PK
# 	[1996/06/04  18:53 UTC  psn  /main/DCE122_PK/1]
# 
# 	Merge udpated pvtkey stuff
# 
# 	Comment out test program
# 	[1996/05/09  20:08 UTC  cuti  /main/DCE12_PK/cuti_pk_new/3]
# 
# 	Remove sec_pvtkey_test.c
# 	[1996/05/09  19:45 UTC  cuti  /main/DCE12_PK/cuti_pk_new/2]
# 
# 	Restore BSAFE_LIBDIR to /net/miney
# 	[1996/05/09  19:19 UTC  cuti  /main/DCE12_PK/cuti_pk_new/1]
# 
# 	PKSS drop from DEC (DCE1.2.2)
# 	[1996/08/30  15:33 UTC  arvind  /main/DCE_1.2.2/arvind_pkss/1]
# 
# 	OSF DCE1.2.2 Drop3
# 	Makefile,v
# 	[1996/07/08  20:20:50  arvind  1.1.2.1]
# 
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 	[1996/07/08  20:02:59  arvind]
# 
# 	OSF DCE1.2.2 Drop3
# 	[1996/07/08  20:02:59  arvind  1.1.1.2]
# 
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 	[1996/07/01  20:10 UTC  cuti  /main/DCE_1.2.2/6]
# 	$Log: Makefile,v $
# Revision 1.1.2.2  1996/10/04  19:25:39  arvind
# 	OSF DCE 1.2.2 Drop 4
# 	[1996/10/04  19:25:10  arvind]
#
# 	Revision 1.1.3.2  1996/10/04  19:25:10  arvind
# 	OSF DCE 1.2.2 Drop 4
# 
# 	Revision /main/DCE_1.2.2/8  1996/09/17  18:35 UTC  cuti
# 	Merge for international build.
# 
# Revision /main/DCE_1.2.2/cuti_pk_fix/1  1996/09/16  16:41 UTC  cuti
# 	Update for International build
# 
# Revision /main/DCE_1.2.2/7  1996/09/09  21:32 UTC  arvind
# 	PKSS drop from DEC (DCE1.2.2)
# 	[1996/08/30  15:33 UTC  arvind  /main/DCE_1.2.2/arvind_pkss/1]
# 
# 	OSF DCE1.2.2 Drop3
# 	Makefile,v
# 	[1996/07/08  20:20:50  arvind  1.1.2.1]
# 
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 	[1996/07/08  20:02:59  arvind]
# 	#
# 
# 	Rechecked in
# 	[1996/07/01  00:28 UTC  cuti  /main/DCE_1.2.2/5]
# 
# 	Remove libbsafe2.a from libpsm.a
# 	[1996/06/27  14:03 UTC  cuti  /main/DCE122_PK/cuti_pk_export/3]
# 
# 	Modified and comments included
# 	[1996/06/24  13:53 UTC  cuti  /main/DCE122_PK/cuti_pk_export/2]
# 
# 	Merge out from cuti_pk_new to cuti_pk_export
# 
# 	DCE12_PK -> DCE122_PK
# 	[1996/06/04  18:53 UTC  psn  /main/DCE122_PK/1]
# 
# 	Merge udpated pvtkey stuff
# 
# 	Comment out test program
# 	[1996/05/09  20:08 UTC  cuti  /main/DCE12_PK/cuti_pk_new/3]
# 
# 	Remove sec_pvtkey_test.c
# 	[1996/05/09  19:45 UTC  cuti  /main/DCE12_PK/cuti_pk_new/2]
# 
# 	Restore BSAFE_LIBDIR to /net/miney
# 	[1996/05/09  19:19 UTC  cuti  /main/DCE12_PK/cuti_pk_new/1]
# 
# Revision /main/DCE_1.2.2/6  1996/07/01  20:10 UTC  cuti
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 
# Revision /main/DCE_1.2.2/5  1996/07/01  00:28 UTC  cuti
# 	Rechecked in
# 
# Revision /main/DCE122_PK/cuti_pk_export/3  1996/06/27  14:03 UTC  cuti
# 	Remove libbsafe2.a from libpsm.a
# 
# Revision /main/DCE122_PK/cuti_pk_export/2  1996/06/24  13:53 UTC  cuti
# 	Modified and comments included
# 
# Revision /main/DCE122_PK/cuti_pk_export/1  1996/06/19  18:10 UTC  cuti
# 	Merge out from cuti_pk_new to cuti_pk_export
# 
# 	DCE12_PK -> DCE122_PK
# 	[1996/06/04  18:53 UTC  psn  /main/DCE122_PK/1]
# 
# 	Merge udpated pvtkey stuff
# 
# 	Comment out test program
# 	[1996/05/09  20:08 UTC  cuti  /main/DCE12_PK/cuti_pk_new/3]
# 
# 	Remove sec_pvtkey_test.c
# 	[1996/05/09  19:45 UTC  cuti  /main/DCE12_PK/cuti_pk_new/2]
# 
# 	Restore BSAFE_LIBDIR to /net/miney
# 	[1996/05/09  19:19 UTC  cuti  /main/DCE12_PK/cuti_pk_new/1]
# 	$Log: Makefile,v $
# Revision 1.1.2.2  1996/10/04  19:25:39  arvind
# 	OSF DCE 1.2.2 Drop 4
# 	[1996/10/04  19:25:10  arvind]
#
# 	Revision 1.1.3.2  1996/10/04  19:25:10  arvind
# 	OSF DCE 1.2.2 Drop 4
# 
# 	Revision /main/DCE_1.2.2/8  1996/09/17  18:35 UTC  cuti
# 	Merge for international build.
# 
# Revision /main/DCE_1.2.2/cuti_pk_fix/1  1996/09/16  16:41 UTC  cuti
# 	Update for International build
# 
# Revision /main/DCE_1.2.2/7  1996/09/09  21:32 UTC  arvind
# 	PKSS drop from DEC (DCE1.2.2)
# 	[1996/08/30  15:33 UTC  arvind  /main/DCE_1.2.2/arvind_pkss/1]
# 
# 	OSF DCE1.2.2 Drop3
# 	Makefile,v
# 	[1996/07/08  20:20:50  arvind  1.1.2.1]
# 
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 	[1996/07/08  20:02:59  arvind]
# 	#
# 
# 	Rechecked in
# 	[1996/07/01  00:28 UTC  cuti  /main/DCE_1.2.2/5]
# 
# 	Remove libbsafe2.a from libpsm.a
# 	[1996/06/27  14:03 UTC  cuti  /main/DCE122_PK/cuti_pk_export/3]
# 
# 	Modified and comments included
# 	[1996/06/24  13:53 UTC  cuti  /main/DCE122_PK/cuti_pk_export/2]
# 
# 	Merge out from cuti_pk_new to cuti_pk_export
# 
# 	DCE12_PK -> DCE122_PK
# 	[1996/06/04  18:53 UTC  psn  /main/DCE122_PK/1]
# 
# 	Merge udpated pvtkey stuff
# 
# 	Comment out test program
# 	[1996/05/09  20:08 UTC  cuti  /main/DCE12_PK/cuti_pk_new/3]
# 
# 	Remove sec_pvtkey_test.c
# 	[1996/05/09  19:45 UTC  cuti  /main/DCE12_PK/cuti_pk_new/2]
# 
# 	Restore BSAFE_LIBDIR to /net/miney
# 	[1996/05/09  19:19 UTC  cuti  /main/DCE12_PK/cuti_pk_new/1]
# 
# Revision /main/DCE_1.2.2/6  1996/07/01  20:10 UTC  cuti
# 	Add EXPSHLIB_TARGETS and if block same as utils/Makefile
# 
# Revision /main/DCE_1.2.2/5  1996/07/01  00:28 UTC  cuti
# 	Rechecked in
# 
# Revision /main/DCE122_PK/cuti_pk_export/3  1996/06/27  14:03 UTC  cuti
# 	Remove libbsafe2.a from libpsm.a
# 
# Revision /main/DCE122_PK/cuti_pk_export/2  1996/06/24  13:53 UTC  cuti
# 	Modified and comments included
# 
# Revision /main/DCE122_PK/cuti_pk_export/1  1996/06/19  18:10 UTC  cuti
# 	Merge out from cuti_pk_new to cuti_pk_export
# 
# Revision /main/DCE12_PK/cuti_pk_new/6  1996/06/13  20:08 UTC  cuti
# 	Use BSAFE_ROOT for referencing BSAFE include files and library.
# 
# Revision /main/DCE12_PK/cuti_pk_new/5  1996/06/11  14:07 UTC  cuti
# 	International support
# 
# Revision /main/DCE12_PK/cuti_pk_new/3  1996/05/09  20:08 UTC  cuti
# 	Comment out test program
# 
# Revision /main/DCE12_PK/cuti_pk_new/2  1996/05/09  19:45 UTC  cuti
# 	Remove sec_pvtkey_test.c
# 
# Revision /main/DCE12_PK/cuti_pk_new/1  1996/05/09  19:19 UTC  cuti
# 	Restore BSAFE_LIBDIR to /net/miney
# 
# Revision /main/DCE12_PK/1  1996/05/08  13:46 UTC  cuti
# 	Prepare for review of pvtkey.
# 
# Revision /main/cuti_pk_work/2  1996/04/29  14:53 UTC  cuti
# 	Change defined name
# 
# Revision /main/cuti_pk_work/1  1996/04/29  14:27 UTC  cuti
# 	Added sec_psm.o, sec_pvtkey.o, sec_pk.o, sec_bsafe.o
# 
# $EndLog$
#
#
#  OSF DCE Version 1.0.2
#
#   Makefile
#
# Copyright (c) Hewlett-Packard Company 1991,1992,1993
# Unpublished work. All Rights Reserved.
#
# DCE Security Services 
# /psm Makefile
#

PSM_OFILES =  sec_psm.o \
              dcepsmsvc.o \
              dcepsmmsg.o \
	      ${SEC_PVTKEY_OBJ} \
	      ${SEC_PVTKEY_ERALOOKUP_OBJ} \
	      ${SEC_PVTKEY_ERA_OBJ} \
	      ${SEC_PVTKEY_SWITCH_OBJ} \
	      ${SEC_PVTKEY_REGISTEREDKEYSTORES_OBJ} \
 	      ${SEC_BSAFE_OBJ} \
	      ${SEC_PVTKEY_KEYSTORE_OBJ} 

.if defined (USE_DES)
SEC_PVTKEY_OBJ = sec_pvtkey.o
SEC_PVTKEY_ERALOOKUP_OBJ = sec_pvtkey_era_lookup.o
SEC_PVTKEY_ERA_OBJ = sec_pvtkey_era.o
SEC_PVTKEY_SWITCH_OBJ = sec_pvtkey_switch.o
SEC_PVTKEY_REGISTEREDKEYSTORES_OBJ = sec_pvtkey_registered_keystores.o
SEC_BSAFE_OBJ = sec_bsafe.o
SEC_PVTKEY_KEYSTORE_OBJ = sec_pvtkey_file.o
# Other keystores (e.g. PKSS) are built in their own directories.
.else
SEC_PVTKEY_OBJ = 
SEC_PVTKEY_ERALOOKUP_OBJ =
SEC_PVTKEY_ERA_OBJ = 
SEC_PVTKEY_SWITCH_OBJ = 
SEC_PVTKEY_REGISTEREDKEYSTORES_OBJ = 
SEC_BSAFE_OBJ = 
SEC_PVTKEY_KEYSTORE_OBJ = 
.endif

libpsm_OFILES =  ${PSM_OFILES}
libpsm.a_OFILES =  ${PSM_OFILES}

#
# The rest of the Makefile is "private" for building in the directory

.if !defined(LIBDCE_LIBRARY_MAKEFILE)
#
# The following definitions are for shared libraries
#   OBJECTS must be defined to pull in the common rules for compilation
#   LIBS    must be defined to prevent -ldce from appearing on compile lines
#
OBJECTS =
LIBS    =

.if defined (USE_DES)
BSAFE_DIR = domestic
INCFLAGS =  -Idomestic -I../h -I${BSAFE_ROOT}/usr/include
.else
BSAFE_DIR = international
INCFLAGS =  -Iinternational -I../h
.endif



# Compiler flags for this directory
CFLAGS  = -DOSF_DCE ${DCEPATHS} -D_BSD -DBSD ${${TARGET_MACHINE}_CFLAGS}

CFLAGS += -DDEBUG

VPATH = ${BSAFE_DIR}:../h

#  Libraries to build
LIBRARIES = libpsm.a
EXPLIB_TARGETS = libpsm.a
EXPSHLIB_TARGETS        = ${libpsm_OFILES}
EXPDIR = /usr/lib/

.if exists(${TARGET_MACHINE}/machdep.mk)
.include "${TARGET_MACHINE}/machdep.mk"
.endif

.include <${RULES_MK}>

sec_psm.o_INCLUDES	= sec_psm.h sec_pk.h sec_bsafe.h sec_psm_base.h

.if defined (USE_DES)
sec_bsafe.o_INCLUDES	= sec_bsafe.h sec_pk_base.h
sec_pvtkey_file.o_INCLUDES	= sec_pvtkey.h sec_pk_base.h sec_pvtkey_base.h
sec_pvtkey.o_INCLUDES = sec_pk_base.h sec_pvtkey.h sec_pvtkey_switch.h
sec_pvtkey_era.o_INCLUDES = sec_pk_base.h
sec_pvtkey_switch.o_INCLUDES = sec_pvtkey_switch.h \
                               sec_pvtkey_registered_keystores.h \
                               sec_pvtkey_era.h
sec_pvtkey_registered_keystores.o_INCLUDES = \
                         sec_pvtkey_registered_keystores.h \
                         sec_pvtkey_pkss.h \
                         sec_pvtkey_file.h 
#.else
#sec_pvtkey_registered_keystores.o_INCLUDES = \
#                         sec_pvtkey_registered_keystores.h 

.endif
.endif
